<?xml version="1.0" encoding="utf-8"?>
<project name="Release_build" default="deploy-all">

  <property name="home" value="${ant.file.Release_build}/../" />

  <property name="jboss.home" value="${home}../../@JBOSS_VERSION@/" />

  <property name="deploy.dir" value="${jboss.home}/server/default/deploy/" />
  
  <target name="deploy-all-jmx">
    <ant antfile="${home}../../resources/sip/build.xml" target="deploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>    
    <ant antfile="${home}../../resources/media/build.xml" target="deploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../resources/persistence/build.xml" target="deploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../resources/tts/build.xml" target="deploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <copy file="${home}../../examples/converged-demo/ShoppingDemo-dev-ds.xml" todir="${deploy.dir}"/>
    <copy file="${home}../../examples/converged-demo/ShoppingDemo.ear" todir="${deploy.dir}"/>
    <ant antfile="${home}../../examples/converged-demo/events-du-management.xml" target="deploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../examples/converged-demo/services-du-management.xml" target="deploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
  </target>

  <target name="undeploy-all-jmx">
    <ant antfile="${home}../../examples/converged-demo/services-du-management.xml" target="undeploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../examples/converged-demo/events-du-management.xml" target="undeploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <delete file="${deploy.dir}/ShoppingDemo.ear" />
    <delete file="${deploy.dir}/ShoppingDemo-dev-ds.xml" />
    <ant antfile="${home}../../resources/tts/build.xml" target="undeploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../resources/persistence/build.xml" target="undeploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../resources/media/build.xml" target="undeploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../resources/sip/build.xml" target="undeploy-jmx" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
  </target>

  <target name="deploy-all">
    <ant antfile="${home}../../resources/sip/build.xml" target="deploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../resources/media/build.xml" target="deploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../resources/persistence/build.xml" target="deploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../resources/tts/build.xml" target="deploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <copy file="${home}../../examples/converged-demo/ShoppingDemo-dev-ds.xml" todir="${deploy.dir}"/>
    <copy file="${home}../../examples/converged-demo/ShoppingDemo.ear" todir="${deploy.dir}"/>
    <ant antfile="${home}../../examples/converged-demo/events-du-management.xml" target="deploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../examples/converged-demo/services-du-management.xml" target="deploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
  </target>

  <target name="undeploy-all">
    <ant antfile="${home}../../examples/converged-demo/services-du-management.xml" target="undeploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../examples/converged-demo/events-du-management.xml" target="undeploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <delete file="${deploy.dir}/ShoppingDemo.ear" />
    <delete file="${deploy.dir}/ShoppingDemo-dev-ds.xml" />
    <ant antfile="${home}../../resources/tts/build.xml" target="undeploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../resources/persistence/build.xml" target="undeploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../resources/media/build.xml" target="undeploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
    <ant antfile="${home}../../resources/sip/build.xml" target="undeploy" inheritAll="false">
      <property name="jboss.home" value="${jboss.home}" />
    </ant>
  </target>

</project>
